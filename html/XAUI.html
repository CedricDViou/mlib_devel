<!-- start content -->
			<p><b>Block:</b> XAUI Transceiver (<code>XAUI</code>)<br />
<b>Block Author</b>: Pierre Yves Droz, Henry Chen<br />
<b>Document Author</b>: Jason Manley<br />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Summary"><span class="tocnumber">1</span> <span class="toctext">Summary</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Mask_Parameters"><span class="tocnumber">2</span> <span class="toctext">Mask Parameters</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Ports"><span class="tocnumber">3</span> <span class="toctext">Ports</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Description"><span class="tocnumber">4</span> <span class="toctext">Description</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Demux"><span class="tocnumber">4.1</span> <span class="toctext">Demux</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Out_of_band_signals"><span class="tocnumber">4.2</span> <span class="toctext">Out of band signals</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script>if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<h2> <span class="mw-headline" id="Summary"> Summary </span></h2>
<p>XAUI block for sending and receiving point-to-point, streaming data over the BEE2 and iBOB's CX4 connectors. NOTE: A new version of this block is in development.
</p>
<h2> <span class="mw-headline" id="Mask_Parameters"> Mask Parameters </span></h2>
<table width="500" border="1" cellpadding="3">
<tr>
<th> Parameter
</th><th> Variable
</th><th> Description
</th></tr>
<tr>
<td> Demux
</td><td> demux
</td><td> Selects the width of the data bus. 1 for 64 bits, 2 for 32 bits.
</td></tr>
<tr>
<td> Port
</td><td> port
</td><td> Selects the physical CX4 port on the iBOB or BEE2. The iBOB has two ports; the BEE2 has two for the control FPGA and four for each of the user FPGAs. CORR is not used by CASPER.
</td></tr>
<tr>
<td> Pre-emphasis
</td><td> pre_emph
</td><td> Selects the pre-emaphasis to use over the physical link. Default: 3 (see Xilinx documentation)
</td></tr>
<tr>
<td> Differential Swing
</td><td> swing
</td><td> Selects the size of the differential swing to use in mV. Default: 800 (see Xilinx documentation)
</td></tr>
</table>
<h2> <span class="mw-headline" id="Ports"> Ports </span></h2>
<table width="500" border="1" cellpadding="3">
<tr>
<th> Port
</th><th> Dir
</th><th> Data Type
</th><th> Description
</th></tr>
<tr>
<td> rx_get
</td><td> in
</td><td> boolean
</td><td> Used to request the next data word from the RX buffer.
</td></tr>
<tr>
<td> rx_reset
</td><td> in
</td><td> boolean
</td><td> Resets the receive subsystem.
</td></tr>
<tr>
<td> tx_data
</td><td> in
</td><td> ufix_64_0 or ufix_32_0
</td><td> Accepts the next data word (64 or 32 bits) to be transmitted.
</td></tr>
<tr>
<td> tx_outofband
</td><td> in
</td><td> ufix_8_0 or ufix_4_0
</td><td> Accepts the next data word (8 bits if demux=1, 4 bits if demux=2) to be transmitted through the out-of-band channel.
</td></tr>
<tr>
<td> tx_valid
</td><td> out
</td><td> boolean
</td><td> Clocks the transmit data into the transceiver. Data is clocked into the buffer while this line is high.
</td></tr>
<tr>
<td> rx_data
</td><td> out
</td><td> ufix_64_0
</td><td> Outputs the received data stream.
</td></tr>
<tr>
<td> rx_outofband
</td><td> out
</td><td> ufix_8_0 or ufix_4_0
</td><td> Outputs the out-of-band received data stream.
</td></tr>
<tr>
<td> rx_empty
</td><td> out
</td><td> boolean
</td><td> Indicates that the receive buffer is empty.
</td></tr>
<tr>
<td> rx_valid
</td><td> out
</td><td> boolean
</td><td> Indicates that data has been received.
</td></tr>
<tr>
<td> rx_linkdown
</td><td> out
</td><td> boolean
</td><td> Indicates that the link is down (eg. faulty cable).
</td></tr>
<tr>
<td> tx_full
</td><td> out
</td><td> boolean
</td><td> Indicates the transmit buffer is full.
</td></tr>
<tr>
<td> rx_almost_full
</td><td> boolean
</td><td> inherited
</td><td> Indicates the receive buffer is full.
</td></tr>
</table>
<h2> <span class="mw-headline" id="Description"> Description </span></h2>
<h3> <span class="mw-headline" id="Demux"> Demux </span></h3>
<p>Perhaps a misnomer, this parameter describes the width of the data bus rather than a selection of two muxed streams on one channel. At 156MHz XAUI clock, the maximum transmission speed is 64bits * 156.25 MHz = 10Gbit/s. For BEE or iBOB designs clocked at rates above 156MHz, clocking-in 64 bit data on every clock cycle would cause the XAUI block's FIFO buffers to overflow. The <code>demux</code> option is provided which halves the input data bus width to 32 bits and enables data to be clocked-in on every FPGA clock cycle. Along with the data bus width, the <code>out of band</code> bus width is also halved to 4 bits.
</p>
<h3> <span class="mw-headline" id="Out_of_band_signals"> Out of band signals </span></h3>
<p>Out of band signals are guaranteed to arrive at the same time as the data word with which they were sent. Out-of-band data is only transmitted across the physical link if the input to <code>tx_outofband</code> changes and is clocked in as valid (<code>tx_valid</code>). In other words, if you keep <code>tx_outofband</code> constant, no additional bandwidth is consumed (the in-band signals are transmitted as normal). When data is clocked into the transmitter, it will appear out the receiver as if the <code>tx_outofband</code> and <code>tx_data</code> arrived simultaneously. Care should be taken to ensure that the data clocked into <code>tx_outofband</code> and <code>tx_data</code> does not exceed the XAUI's maximum transmission rate (approximately 10Gbps for 156.25MHz clock). Each change of <code>tx_outofband</code> (be it one bit or eight bits) requires 64 bits (a full word) to transmit. This bus width is 8 bits if <code>demux</code> is not selected (set to 1), and 4 bits if it is set to 2.
</p>