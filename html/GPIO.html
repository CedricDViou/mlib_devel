<!-- start content -->
			<p><b>Block:</b> GPIO (<code>gpio</code>)<br />
<b>Block Author</b>: Pierre-Yves Droz<br />
<b>Document Author</b>: Billy Mallard<br />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Summary"><span class="tocnumber">1</span> <span class="toctext">Summary</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Mask_Parameters"><span class="tocnumber">2</span> <span class="toctext">Mask Parameters</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Ports"><span class="tocnumber">3</span> <span class="toctext">Ports</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Description"><span class="tocnumber">4</span> <span class="toctext">Description</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#ROACH_Specific_Information"><span class="tocnumber">4.1</span> <span class="toctext">ROACH Specific Information</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Notes"><span class="tocnumber">5</span> <span class="toctext">Notes</span></a></li>
</ul>
</td></tr></table><script>if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<h2> <span class="mw-headline" id="Summary"> Summary </span></h2>
<p>The gpio block provides access to GPIO pins on any board that has GPIO headers.
</p>
<h2> <span class="mw-headline" id="Mask_Parameters"> Mask Parameters </span></h2>
<table width="500" border="1" cellpadding="3">
<tr>
<th> Parameter
</th><th> Variable
</th><th> Description
</th></tr>
<tr>
<td> I/O group
</td><td> io_group
</td><td> Selects the board architecture and the GPIO header on that board.
</td></tr>
<tr>
<td> I/O direction
</td><td> io_dir
</td><td> Chooses whether the pin sends data <code>out</code> of or <code>in</code> to the FPGA.
</td></tr>
<tr>
<td> Data Type
</td><td> arith_type
</td><td> Specifies data type of register.
</td></tr>
<tr>
<td> Data bitwidth
</td><td> bitwidth
</td><td> Specifies data bitwidth.
</td></tr>
<tr>
<td> Data binary point
</td><td> bin_pt
</td><td> Specifies the binary point position of data.
</td></tr>
<tr>
<td> GPIO bit index
</td><td> bit_index
</td><td> Specifies the pin on the selected GPIO header.
</td></tr>
<tr>
<td> Sample period
</td><td> sample_period
</td><td> Specifies sample period of interface.
</td></tr>
<tr>
<td> Use DDR
</td><td> use_ddr
</td><td>&nbsp;???
</td></tr>
<tr>
<td> Pack register in the pad
</td><td> reg_iob
</td><td>&nbsp;???
</td></tr>
<tr>
<td> Register clock phase
</td><td> reg_clk_phase
</td><td> <code>0</code>, <code>90</code>, <code>180</code>, <code>270</code>.
</td></tr>
<tr>
<td> Termination method
</td><td> termination
</td><td> <code>None</code>, <code>Pullup</code>, <code>Pulldown</code>.
</td></tr>
</table>
<h2> <span class="mw-headline" id="Ports"> Ports </span></h2>
<table width="500" border="1" cellpadding="3">
<tr>
<th> Port
</th><th> Dir
</th><th> Data Type
</th><th> Description
</th></tr>
<tr>
<td> reg_out
</td><td> in
</td><td> inherited
</td><td> Output from design to GPIO pin. Only in I/O <code>in</code> mode.
</td></tr>
<tr>
<td> sim_out
</td><td> out
</td><td> double
</td><td> Simulation output of pin value. Only in I/O <code>in</code> mode.
</td></tr>
<tr>
<td> sim_in
</td><td> in
</td><td> double
</td><td> Simulation input of pin value. Only in I/O <code>out</code> mode.
</td></tr>
<tr>
<td> reg_in
</td><td> out
</td><td> inherited
</td><td> Input from GPIO pin to design. Only in I/O <code>out</code> mode.
</td></tr>
</table>
<h2> <span class="mw-headline" id="Description"> Description </span></h2>
<h3> <span class="mw-headline" id="ROACH_Specific_Information"> ROACH Specific Information </span></h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<i>Main article: <a href="/wiki/ROACH_FPGA_Interfaces" title="ROACH FPGA Interfaces">ROACH FPGA Interfaces</a></i>
</p><p>Each GPIO header has one direction selector that controls the direction of all 8 of its pins.  You must set a direction.  So, in addition to your normal <code>gpio</code> block (configured for I/O group <code>ROACH:gpio[ab]</code>), add another <code>gpio</code> block, and set the following parameters:
</p>
<ul><li> I/O group = <code>ROACH:gpio[ab]_oe_n</code>
</li><li> I/O direction = <code>out</code>
</li><li> bitwidth = <code>1</code>
</li><li> bit_index = <code>0</code>
</li></ul>
<p>The direction selector takes a boolean value as its input, so wire it to a Xilinx constant block:
</p>
<ul><li> <code>0</code> - output from ROACH
</li><li> <code>1</code> - input to ROACH
</li></ul>
<p>The two SMA connectors on the back of the board are wired directly to GPIO pins.  Specifically, J11 and J10 are wired to pins 6 and 7 on GPIO A.
</p>
<h2> <span class="mw-headline" id="Notes"> Notes </span></h2>
<p>The order of the FPGA GPIOs have been changed from "3 2 1 0 7 6 5 4" to now match the order printed on the PCB "0 1 2 3 4 5 6 7". (See image)
</p><p><br />
Old mapping: 3 2 1 0 7 6 5 4
</p><p>New mapping: 0 1 2 3 4 5 6 7
</p>
<div class="thumb tright"><div class="thumbinner" style="width:182px;"><a href="/wiki/File:FPGA_GPIO_Header.JPG" class="image"><img alt="" src="images/thumb/b/b8/FPGA_GPIO_Header.JPG/180px-FPGA_GPIO_Header.JPG" width="180" height="68" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/wiki/File:FPGA_GPIO_Header.JPG" class="internal" title="Enlarge"><img src="/w/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>ROACH FPGA GPIOs numbering</div></div></div>
